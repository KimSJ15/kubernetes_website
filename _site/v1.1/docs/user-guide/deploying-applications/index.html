<!Doctype html>
<html id="docs">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="/css/styles.css"/>
	<script src="/js/script.js"></script>
    <script src="/js/jquery-2.2.0.min.js"></script>
    <script src="/js/non-mini.js"></script>
    <title>Kubernetes - Kubernetes User Guide: Managing Applications: Deploying continuously running applications</title>
</head>
<body>
<div id="cellophane" onclick="kub.toggleMenu()"></div>
<header>
	<a href="/" class="logo"></a>
	<div class="nav-buttons" data-auto-burger="primary">
		<a href="/docs" class="button" id="viewDocs">View Documentation</a>
		<a href="/get-started" class="button" id="tryKubernetes">Try Kubernetes</a>
		<button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
	</div>

	<nav id="mainNav">
		<main data-auto-burger="primary">
			<div class="nav-box">
				<h3><a href="">Get Started</a></h3>
				<p>Built for a multi-cloud world, public, private or hybrid. Seamlessly roll out new features.</p>
			</div>
			<div class="nav-box">
				<h3><a href="">Documentation</a></h3>
				<p>Pellentesque in ipsum id orci porta dapibus. Nulla porttitor accumsan tincidunt. </p>
			</div>
			<div class="nav-box">
				<h3><a href="">Community</a></h3>
				<p>Vestibulum ac diam sit amet quam vehicula elementum sed sit amet dui. </p>
			</div>
			<div class="nav-box">
				<h3><a href="">Blog</a></h3>
				<p>Curabitur arcu erat, accumsan id imperdiet et, porttitor at sem. Quisque velit nisi, pretium ut lacinia in. </p>
			</div>
		</main>
		<main data-auto-burger="primary">
			<div class="left">
				<h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
				<a href="" class="button">View On Github</a>
			</div>

			<div class="right">
				<h5 class="github-invite">Explore the community</h5>
				<div class="social">
					<a href="https://twitter.com/kubernetesio" class="Twitter"><span>twitter</span></a>
					<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
					<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
					<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>stackoverflow</span></a>
					<a href="https://groups.google.com/forum/#!forum/google-containers" class="mailing-list"><span>Mailing List</span></a>
				</div>
			</div>
			<div class="clear" style="clear: both"></div>
		</main>
	</nav>
</header>

<!--  HERO  -->
<section id="hero" class="light-text">
	<h1></h1>
	<h5></h5>
	<div id="vendorStrip" class="light-text">
		<ul>
			<li><a href="/v1.1/">GUIDES</a></li>
			<li><a href="/v1.1/reference">REFERENCE</a></li>
			<li><a href="/v1.1/samples">SAMPLES</a></li>
			<li><a href="/v1.1/support">SUPPORT</a></li>
		</ul>
		<div class="dropdown">
			<div class="readout"></div>
			<a href="/v1.1">Version 1.1</a>
			<a href="/v1.0">Version 1.0</a>
		</div>
		<input type="text" id="search" placeholder="Search the docs">
	</div>
</section>

<section id="encyclopedia">
	<div id="docsToc">
        <div class="pi-accordion">
            
            

        </div> <!-- /pi-accordion -->
	</div> <!-- /docsToc -->
	<div id="docsContent">
    	<h1>Kubernetes User Guide: Managing Applications: Deploying continuously running applications</h1>
		<!-- BEGIN MUNGE: UNVERSIONED_WARNING -->

<!-- END MUNGE: UNVERSIONED_WARNING -->

<h1 id="kubernetes-user-guide-managing-applications-deploying-continuously-running-applications">Kubernetes User Guide: Managing Applications: Deploying continuously running applications</h1>

<p><strong>Table of Contents</strong>
<!-- BEGIN MUNGE: GENERATED_TOC --></p>

<ul>
  <li><a href="#kubernetes-user-guide-managing-applications-deploying-continuously-running-applications">Kubernetes User Guide: Managing Applications: Deploying continuously running applications</a>
    <ul>
      <li><a href="#launching-a-set-of-replicas-using-a-configuration-file">Launching a set of replicas using a configuration file</a></li>
      <li><a href="#viewing-replication-controller-status">Viewing replication controller status</a></li>
      <li><a href="#deleting-replication-controllers">Deleting replication controllers</a></li>
      <li><a href="#labels">Labels</a></li>
      <li><a href="#whats-next">What’s next?</a></li>
    </ul>
  </li>
</ul>

<!-- END MUNGE: GENERATED_TOC -->

<p>You previously read about how to quickly deploy a simple replicated application using <a href="quick-start.html"><code>kubectl run</code></a> and how to configure and launch single-run containers using pods (<a href="configuring-containers.html">Configuring containers</a>). Here you’ll use the configuration-based approach to deploy a continuously running, replicated application.</p>

<h2 id="launching-a-set-of-replicas-using-a-configuration-file">Launching a set of replicas using a configuration file</h2>

<p>Kubernetes creates and manages sets of replicated containers (actually, replicated <a href="pods.html">Pods</a>) using <a href="replication-controller.html"><em>Replication Controllers</em></a>.</p>

<p>A replication controller simply ensures that a specified number of pod “replicas” are running at any one time. If there are too many, it will kill some. If there are too few, it will start more. It’s analogous to Google Compute Engine’s <a href="https://cloud.google.com/compute/docs/instance-groups/manager/">Instance Group Manager</a> or AWS’s <a href="http://docs.aws.amazon.com/AutoScaling/latest/DeveloperGuide/AutoScalingGroup.html">Auto-scaling Group</a> (with no scaling policies).</p>

<p>The replication controller created to run nginx by <code>kubectl run</code> in the <a href="quick-start.html">Quick start</a> could be specified using YAML as follows:</p>

<div class="highlight">
  <pre><code class="language-yaml">apiVersion: v1
kind: ReplicationController
metadata:
  name: my-nginx
spec:
  replicas: 2
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx
        ports:
        - containerPort: 80
</code></pre>
</div>

<p>Some differences compared to specifying just a pod are that the <code>kind</code> is <code>ReplicationController</code>, the number of <code>replicas</code> desired is specified, and the pod specification is under the <code>template</code> field. The names of the pods don’t need to be specified explicitly because they are generated from the name of the replication controller.
View the <a href="http://kubernetes.io/v1.1/docs/api-reference/v1/definitions.html#_v1_replicationcontroller">replication controller API
object</a>
to view the list of supported fields.</p>

<p>This replication controller can be created using <code>create</code>, just as with pods:</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl create -f ./nginx-rc.yaml
replicationcontrollers/my-nginx
</code></pre>
</div>

<p>Unlike in the case where you directly create pods, a replication controller replaces pods that are deleted or terminated for any reason, such as in the case of node failure. For this reason, we recommend that you use a replication controller for a continuously running application even if your application requires only a single pod, in which case you can omit <code>replicas</code> and it will default to a single replica.</p>

<h2 id="viewing-replication-controller-status">Viewing replication controller status</h2>

<p>You can view the replication controller you created using <code>get</code>:</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl get rc
CONTROLLER   CONTAINER(S)   IMAGE(S)   SELECTOR    REPLICAS
my-nginx     nginx          nginx      app=nginx   2
</code></pre>
</div>

<p>This tells you that your controller will ensure that you have two nginx replicas.</p>

<p>You can see those replicas using <code>get</code>, just as with pods you created directly:</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl get pods
NAME             READY     STATUS    RESTARTS   AGE
my-nginx-065jq   1/1       Running   0          51s
my-nginx-buaiq   1/1       Running   0          51s
</code></pre>
</div>

<h2 id="deleting-replication-controllers">Deleting replication controllers</h2>

<p>When you want to kill your application, delete your replication controller, as in the <a href="quick-start.html">Quick start</a>:</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl delete rc my-nginx
replicationcontrollers/my-nginx
</code></pre>
</div>

<p>By default, this will also cause the pods managed by the replication controller to be deleted. If there were a large number of pods, this may take a while to complete. If you want to leave the pods running, specify <code>--cascade=false</code>.</p>

<p>If you try to delete the pods before deleting the replication controller, it will just replace them, as it is supposed to do.</p>

<h2 id="labels">Labels</h2>

<p>Kubernetes uses user-defined key-value attributes called <a href="labels.html"><em>labels</em></a> to categorize and identify sets of resources, such as pods and replication controllers. The example above specified a single label in the pod template, with key <code>app</code> and value <code>nginx</code>. All pods created carry that label, which can be viewed using <code>-L</code>:</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl get pods -L app
NAME             READY     STATUS    RESTARTS   AGE       APP
my-nginx-afv12   0/1       Running   0          3s        nginx
my-nginx-lg99z   0/1       Running   0          3s        nginx
</code></pre>
</div>

<p>The labels from the pod template are copied to the replication controller’s labels by default, as well – all resources in Kubernetes support labels:</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl get rc my-nginx -L app
CONTROLLER   CONTAINER(S)   IMAGE(S)   SELECTOR    REPLICAS   APP
my-nginx     nginx          nginx      app=nginx   2          nginx
</code></pre>
</div>

<p>More importantly, the pod template’s labels are used to create a <a href="labels.html#label-selectors"><code>selector</code></a> that will match pods carrying those labels. You can see this field by requesting it using the <a href="kubectl/kubectl_get.html">Go template output format of <code>kubectl get</code></a>:</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl get rc my-nginx -o template --template="{{.spec.selector}}"
map[app:nginx]
</code></pre>
</div>

<p>You could also specify the <code>selector</code> explicitly, such as if you wanted to specify labels in the pod template that you didn’t want to select on, but you should ensure that the selector will match the labels of the pods created from the pod template, and that it won’t match pods created by other replication controllers. The most straightforward way to ensure the latter is to create a unique label value for the replication controller, and to specify it in both the pod template’s labels and in the selector.</p>

<h2 id="whats-next">What’s next?</h2>

<p><a href="connecting-applications.html">Learn about exposing applications to users and clients, and connecting tiers of your application together.</a></p>

<!-- BEGIN MUNGE: IS_VERSIONED -->
<!-- TAG IS_VERSIONED -->
<!-- END MUNGE: IS_VERSIONED -->

<!-- BEGIN MUNGE: GENERATED_ANALYTICS -->
<p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/user-guide/deploying-applications.md?pixel" alt="Analytics" /></a>
<!-- END MUNGE: GENERATED_ANALYTICS --></p>


	</div>
</section>


<footer>
	<main class="light-text">
		<nav>
			<a href="/getting-started.html">Getting Started</a>
			<a href="/docs.html">Documentation</a>
			<a href="http://blog.kubernetes.io/">Blog</a>
			<a href="/foobang.html">Community</a>
		</nav>
		<div class="social">
			<a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
			<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
			<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
			<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>stackoverflow</span></a>
			<a href="https://groups.google.com/forum/#!forum/google-containers" class="mailing-list"><span>Mailing List</span></a>
			<label for="wishField">I wish this page <input type="text" id="wishField" name="wishField" placeholder="made better textfield suggestions"></label>
		</div>
		<div class="center">&copy; 2016 Kubernetes</div>
	</main>
</footer>

</body>
</html>



