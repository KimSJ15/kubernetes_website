<!Doctype html>
<html id="docs">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="/css/styles.css"/>
	<script src="/js/script.js"></script>
    <script src="/js/jquery-2.2.0.min.js"></script>
    <script src="/js/non-mini.js"></script>
    <title>Kubernetes - My Service is not working - how to debug</title>
</head>
<body>
<div id="cellophane" onclick="kub.toggleMenu()"></div>
<header>
	<a href="/" class="logo"></a>
	<div class="nav-buttons" data-auto-burger="primary">
		<a href="/docs" class="button" id="viewDocs">View Documentation</a>
		<a href="/get-started" class="button" id="tryKubernetes">Try Kubernetes</a>
		<button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
	</div>

	<nav id="mainNav">
		<main data-auto-burger="primary">
			<div class="nav-box">
				<h3><a href="">Get Started</a></h3>
				<p>Built for a multi-cloud world, public, private or hybrid. Seamlessly roll out new features.</p>
			</div>
			<div class="nav-box">
				<h3><a href="">Documentation</a></h3>
				<p>Pellentesque in ipsum id orci porta dapibus. Nulla porttitor accumsan tincidunt. </p>
			</div>
			<div class="nav-box">
				<h3><a href="">Community</a></h3>
				<p>Vestibulum ac diam sit amet quam vehicula elementum sed sit amet dui. </p>
			</div>
			<div class="nav-box">
				<h3><a href="">Blog</a></h3>
				<p>Curabitur arcu erat, accumsan id imperdiet et, porttitor at sem. Quisque velit nisi, pretium ut lacinia in. </p>
			</div>
		</main>
		<main data-auto-burger="primary">
			<div class="left">
				<h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
				<a href="" class="button">View On Github</a>
			</div>

			<div class="right">
				<h5 class="github-invite">Explore the community</h5>
				<div class="social">
					<a href="https://twitter.com/kubernetesio" class="Twitter"><span>twitter</span></a>
					<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
					<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
					<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>stackoverflow</span></a>
					<a href="https://groups.google.com/forum/#!forum/google-containers" class="mailing-list"><span>Mailing List</span></a>
				</div>
			</div>
			<div class="clear" style="clear: both"></div>
		</main>
	</nav>
</header>

<!--  HERO  -->
<section id="hero" class="light-text">
	<h1></h1>
	<h5></h5>
	<div id="vendorStrip" class="light-text">
		<ul>
			<li><a href="/v1.1/guides">GUIDES</a></li>
			<li><a href="/v1.1/reference">REFERENCE</a></li>
			<li><a href="/v1.1/samples">SAMPLES</a></li>
			<li><a href="/v1.1/support">SUPPORT</a></li>
		</ul>
		<div class="dropdown">
			<div class="readout"></div>
			<a href="/v1.1">Version 1.1</a>
			<a href="/v1.0">Version 1.0</a>
		</div>
		<input type="text" id="search" placeholder="Search the docs">
	</div>
</section>

<section id="encyclopedia">
	<div id="docsToc">
        <div class="pi-accordion">
            
            

        </div> <!-- /pi-accordion -->
	</div> <!-- /docsToc -->
	<div id="docsContent">
    	<h1>My Service is not working - how to debug</h1>
		<!-- BEGIN MUNGE: UNVERSIONED_WARNING -->

<!-- END MUNGE: UNVERSIONED_WARNING -->

<h1 id="my-service-is-not-working---how-to-debug">My Service is not working - how to debug</h1>

<p>An issue that comes up rather frequently for new installations of Kubernetes is
that <code>Services</code> are not working properly.  You’ve run all your <code>Pod</code>s and
<code>ReplicationController</code>s, but you get no response when you try to access them.
This document will hopefully help you to figure out what’s going wrong.</p>

<p><strong>Table of Contents</strong>
<!-- BEGIN MUNGE: GENERATED_TOC --></p>

<ul>
  <li><a href="#my-service-is-not-working---how-to-debug">My Service is not working - how to debug</a>
    <ul>
      <li><a href="#conventions">Conventions</a></li>
      <li><a href="#running-commands-in-a-pod">Running commands in a Pod</a></li>
      <li><a href="#setup">Setup</a></li>
      <li><a href="#does-the-service-exist">Does the Service exist?</a></li>
      <li><a href="#does-the-service-work-by-dns">Does the Service work by DNS?</a>
        <ul>
          <li><a href="#does-any-service-exist-in-dns">Does any Service exist in DNS?</a></li>
        </ul>
      </li>
      <li><a href="#does-the-service-work-by-ip">Does the Service work by IP?</a></li>
      <li><a href="#is-the-service-correct">Is the Service correct?</a></li>
      <li><a href="#does-the-service-have-any-endpoints">Does the Service have any Endpoints?</a></li>
      <li><a href="#are-the-pods-working">Are the Pods working?</a></li>
      <li><a href="#is-the-kube-proxy-working">Is the kube-proxy working?</a>
        <ul>
          <li><a href="#is-kube-proxy-running">Is kube-proxy running?</a></li>
          <li><a href="#is-kube-proxy-writing-iptables-rules">Is kube-proxy writing iptables rules?</a></li>
          <li><a href="#is-kube-proxy-proxying">Is kube-proxy proxying?</a></li>
        </ul>
      </li>
      <li><a href="#seek-help">Seek help</a></li>
      <li><a href="#more-information">More information</a></li>
    </ul>
  </li>
</ul>

<!-- END MUNGE: GENERATED_TOC -->

<h2 id="conventions">Conventions</h2>

<p>Throughout this doc you will see various commands that you can run.  Some
commands need to be run within <code>Pod</code>, others on a Kubernetes <code>Node</code>, and others
can run anywhere you have <code>kubectl</code> and credentials for the cluster.  To make it
clear what is expected, this document will use the following conventions.</p>

<p>If the command “COMMAND” is expected to run in a <code>Pod</code> and produce “OUTPUT”:</p>

<div class="highlight">
  <pre><code class="language-console">u@pod$ COMMAND
OUTPUT
</code></pre>
</div>

<p>If the command “COMMAND” is expected to run on a <code>Node</code> and produce “OUTPUT”:</p>

<div class="highlight">
  <pre><code class="language-console">u@node$ COMMAND
OUTPUT
</code></pre>
</div>

<p>If the command is “kubectl ARGS”:</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl ARGS
OUTPUT
</code></pre>
</div>

<h2 id="running-commands-in-a-pod">Running commands in a Pod</h2>

<p>For many steps here you will want to see what a <code>Pod</code> running in the cluster
sees.  Kubernetes does not directly support interactive <code>Pod</code>s (yet), but you can
approximate it:</p>

<div class="highlight">
  <pre><code class="language-console">$ cat &lt;&lt;EOF | kubectl create -f -
apiVersion: v1
kind: Pod
metadata:
  name: busybox-sleep
spec:
  containers:
  - name: busybox
    image: busybox
    args:
    - sleep
    - "1000000"
EOF
pods/busybox-sleep
</code></pre>
</div>

<p>Now, when you need to run a command (even an interactive shell) in a <code>Pod</code>-like
context, use:</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl exec busybox-sleep -- &lt;COMMAND&gt;
</code></pre>
</div>

<p>or</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl exec -ti busybox-sleep sh
/ #
</code></pre>
</div>

<h2 id="setup">Setup</h2>

<p>For the purposes of this walk-through, let’s run some <code>Pod</code>s.  Since you’re
probably debugging your own <code>Service</code> you can substitute your own details, or you
can follow along and get a second data point.</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl run hostnames --image=gcr.io/google_containers/serve_hostname \
                        --labels=app=hostnames \
                        --port=9376 \
                        --replicas=3
CONTROLLER   CONTAINER(S)   IMAGE(S)                                  SELECTOR        REPLICAS
hostnames    hostnames      gcr.io/google_containers/serve_hostname   app=hostnames   3
</code></pre>
</div>

<p>Note that this is the same as if you had started the <code>ReplicationController</code> with
the following YAML:</p>

<div class="highlight">
  <pre><code class="language-yaml">apiVersion: v1
kind: ReplicationController
metadata:
  name: hostnames
spec:
  selector:
    app: hostnames
  replicas: 3
  template:
    metadata:
      labels:
        app: hostnames
    spec:
      containers:
      - name: hostnames
        image: gcr.io/google_containers/serve_hostname
        ports:
        - containerPort: 9376
          protocol: TCP
</code></pre>
</div>

<p>Confirm your <code>Pod</code>s are running:</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl get pods -l app=hostnames
NAME              READY     STATUS    RESTARTS   AGE
hostnames-0uton   1/1       Running   0          12s
hostnames-bvc05   1/1       Running   0          12s
hostnames-yp2kp   1/1       Running   0          12s
</code></pre>
</div>

<h2 id="does-the-service-exist">Does the Service exist?</h2>

<p>The astute reader will have noticed that we did not actually create a <code>Service</code>
yet - that is intentional.  This is a step that sometimes gets forgotten, and
is the first thing to check.</p>

<p>So what would happen if I tried to access a non-existent <code>Service</code>?  Assuming you
have another <code>Pod</code> that consumes this <code>Service</code> by name you would get something
like:</p>

<div class="highlight">
  <pre><code class="language-console">u@pod$ wget -qO- hostnames
wget: bad address 'hostname'
</code></pre>
</div>

<p>or:</p>

<div class="highlight">
  <pre><code class="language-console">u@pod$ echo $HOSTNAMES_SERVICE_HOST
</code></pre>
</div>

<p>So the first thing to check is whether that <code>Service</code> actually exists:</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl get svc hostnames
Error from server: service "hostnames" not found
</code></pre>
</div>

<p>So we have a culprit, let’s create the <code>Service</code>.  As before, this is for the
walk-through - you can use your own <code>Service</code>’s details here.</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl expose rc hostnames --port=80 --target-port=9376
service "hostnames" exposed
</code></pre>
</div>

<p>And read it back, just to be sure:</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl get svc hostnames
NAME              CLUSTER_IP       EXTERNAL_IP       PORT(S)       SELECTOR               AGE
hostnames         10.0.0.1         &lt;none&gt;            80/TCP        run=hostnames          1h
</code></pre>
</div>

<p>As before, this is the same as if you had started the <code>Service</code> with YAML:</p>

<div class="highlight">
  <pre><code class="language-yaml">apiVersion: v1
kind: Service
metadata:
  name: hostnames
spec:
  selector:
    app: hostnames
  ports:
  - name: default
    protocol: TCP
    port: 80
    targetPort: 9376
</code></pre>
</div>

<p>Now you can confirm that the <code>Service</code> exists.</p>

<h2 id="does-the-service-work-by-dns">Does the Service work by DNS?</h2>

<p>From a <code>Pod</code> in the same <code>Namespace</code>:</p>

<div class="highlight">
  <pre><code class="language-console">u@pod$ nslookup hostnames
Server:         10.0.0.10
Address:        10.0.0.10#53

Name:   hostnames
Address: 10.0.1.175
</code></pre>
</div>

<p>If this fails, perhaps your <code>Pod</code> and <code>Service</code> are in different
<code>Namespace</code>s, try a namespace-qualified name:</p>

<div class="highlight">
  <pre><code class="language-console">u@pod$ nslookup hostnames.default
Server:         10.0.0.10
Address:        10.0.0.10#53

Name:   hostnames.default
Address: 10.0.1.175
</code></pre>
</div>

<p>If this works, you’ll need to ensure that <code>Pod</code>s and <code>Service</code>s run in the same
<code>Namespace</code>.  If this still fails, try a fully-qualified name:</p>

<div class="highlight">
  <pre><code class="language-console">u@pod$ nslookup hostnames.default.svc.cluster.local
Server:         10.0.0.10
Address:        10.0.0.10#53

Name:   hostnames.default.svc.cluster.local
Address: 10.0.1.175
</code></pre>
</div>

<p>Note the suffix here: “default.svc.cluster.local”.  The “default” is the
<code>Namespace</code> we’re operating in.  The “svc” denotes that this is a <code>Service</code>.
The “cluster.local” is your cluster domain.</p>

<p>You can also try this from a <code>Node</code> in the cluster (note: 10.0.0.10 is my DNS
<code>Service</code>):</p>

<div class="highlight">
  <pre><code class="language-console">u@node$ nslookup hostnames.default.svc.cluster.local 10.0.0.10
Server:         10.0.0.10
Address:        10.0.0.10#53

Name:   hostnames.default.svc.cluster.local
Address: 10.0.1.175
</code></pre>
</div>

<p>If you are able to do a fully-qualified name lookup but not a relative one, you
need to check that your <code>kubelet</code> is running with the right flags.
The <code>--cluster-dns</code> flag needs to point to your DNS <code>Service</code>’s IP and the
<code>--cluster-domain</code> flag needs to be your cluster’s domain - we assumed
“cluster.local” in this document, but yours might be different, in which case
you should change that in all of the commands above.</p>

<h3 id="does-any-service-exist-in-dns">Does any Service exist in DNS?</h3>

<p>If the above still fails - DNS lookups are not working for your <code>Service</code> - we
can take a step back and see what else is not working.  The Kubernetes master
<code>Service</code> should always work:</p>

<div class="highlight">
  <pre><code class="language-console">u@pod$ nslookup kubernetes.default
Server:    10.0.0.10
Address 1: 10.0.0.10

Name:      kubernetes
Address 1: 10.0.0.1
</code></pre>
</div>

<p>If this fails, you might need to go to the kube-proxy section of this doc, or
even go back to the top of this document and start over, but instead of
debugging your own <code>Service</code>, debug DNS.</p>

<h2 id="does-the-service-work-by-ip">Does the Service work by IP?</h2>

<p>The next thing to test is whether your <code>Service</code> works at all.  From a
<code>Node</code> in your cluster, access the <code>Service</code>’s IP (from <code>kubectl get</code> above).</p>

<div class="highlight">
  <pre><code class="language-console">u@node$ curl 10.0.1.175:80
hostnames-0uton

u@node$ curl 10.0.1.175:80
hostnames-yp2kp

u@node$ curl 10.0.1.175:80
hostnames-bvc05
</code></pre>
</div>

<p>If your <code>Service</code> is working, you should get correct responses.  If not, there
are a number of things that could be going wrong.  Read on.</p>

<h2 id="is-the-service-correct">Is the Service correct?</h2>

<p>It might sound silly, but you should really double and triple check that your
<code>Service</code> is correct and matches your <code>Pods</code>.  Read back your <code>Service</code> and
verify it:</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl get service hostnames -o json
{
    "kind": "Service",
    "apiVersion": "v1",
    "metadata": {
        "name": "hostnames",
        "namespace": "default",
        "selfLink": "/api/v1/namespaces/default/services/hostnames",
        "uid": "428c8b6c-24bc-11e5-936d-42010af0a9bc",
        "resourceVersion": "347189",
        "creationTimestamp": "2015-07-07T15:24:29Z",
        "labels": {
            "app": "hostnames"
        }
    },
    "spec": {
        "ports": [
            {
                "name": "default",
                "protocol": "TCP",
                "port": 80,
                "targetPort": 9376,
                "nodePort": 0
            }
        ],
        "selector": {
            "app": "hostnames"
        },
        "clusterIP": "10.0.1.175",
        "type": "ClusterIP",
        "sessionAffinity": "None"
    },
    "status": {
        "loadBalancer": {}
    }
}
</code></pre>
</div>

<p>Is the port you are trying to access in <code>spec.ports[]</code>?  Is the <code>targetPort</code>
correct for your <code>Pod</code>s?  If you meant it to be a numeric port, is it a number
(9376) or a string “9376”?  If you meant it to be a named port, do your <code>Pod</code>s
expose a port with the same name?  Is the port’s <code>protocol</code> the same as the
<code>Pod</code>’s?</p>

<h2 id="does-the-service-have-any-endpoints">Does the Service have any Endpoints?</h2>

<p>If you got this far, we assume that you have confirmed that your <code>Service</code>
exists and resolves by DNS.  Now let’s check that the <code>Pod</code>s you ran are
actually being selected by the <code>Service</code>.</p>

<p>Earlier we saw that the <code>Pod</code>s were running.  We can re-check that:</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl get pods -l app=hostnames
NAME              READY     STATUS    RESTARTS   AGE
hostnames-0uton   1/1       Running   0          1h
hostnames-bvc05   1/1       Running   0          1h
hostnames-yp2kp   1/1       Running   0          1h
</code></pre>
</div>

<p>The “AGE” column says that these <code>Pod</code>s are about an hour old, which implies that
they are running fine and not crashing.</p>

<p>The <code>-l app=hostnames</code> argument is a label selector - just like our <code>Service</code>
has.  Inside the Kubernetes system is a control loop which evaluates the
selector of every <code>Service</code> and save the results into an <code>Endpoints</code> object.</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl get endpoints hostnames
NAME        ENDPOINTS
hostnames   10.244.0.5:9376,10.244.0.6:9376,10.244.0.7:9376
</code></pre>
</div>

<p>This confirms that the control loop has found the correct <code>Pod</code>s for your
<code>Service</code>.  If the <code>hostnames</code> row is blank, you should check that the
<code>spec.selector</code> field of your <code>Service</code> actually selects for <code>metadata.labels</code>
values on your <code>Pod</code>s.</p>

<h2 id="are-the-pods-working">Are the Pods working?</h2>

<p>At this point, we know that your <code>Service</code> exists and has selected your <code>Pod</code>s.
Let’s check that the <code>Pod</code>s are actually working - we can bypass the <code>Service</code>
mechanism and go straight to the <code>Pod</code>s.</p>

<div class="highlight">
  <pre><code class="language-console">u@pod$ wget -qO- 10.244.0.5:9376
hostnames-0uton

pod $ wget -qO- 10.244.0.6:9376
hostnames-bvc05

u@pod$ wget -qO- 10.244.0.7:9376
hostnames-yp2kp
</code></pre>
</div>

<p>We expect each <code>Pod</code> in the <code>Endpoints</code> list to return its own hostname.  If
this is not what happens (or whatever the correct behavior is for your own
<code>Pod</code>s), you should investigate what’s happening there.  You might find
<code>kubectl logs</code> to be useful or <code>kubectl exec</code> directly to your <code>Pod</code>s and check
service from there.</p>

<h2 id="is-the-kube-proxy-working">Is the kube-proxy working?</h2>

<p>If you get here, your <code>Service</code> is running, has <code>Endpoints</code>, and your <code>Pod</code>s
are actually serving.  At this point, the whole <code>Service</code> proxy mechanism is
suspect.  Let’s confirm it, piece by piece.</p>

<h3 id="is-kube-proxy-running">Is kube-proxy running?</h3>

<p>Confirm that <code>kube-proxy</code> is running on your <code>Node</code>s.  You should get something
like the below:</p>

<div class="highlight">
  <pre><code class="language-console">u@node$ ps auxw | grep kube-proxy
root  4194  0.4  0.1 101864 17696 ?    Sl Jul04  25:43 /usr/local/bin/kube-proxy --master=https://kubernetes-master --kubeconfig=/var/lib/kube-proxy/kubeconfig --v=2
</code></pre>
</div>

<p>Next, confirm that it is not failing something obvious, like contacting the
master.  To do this, you’ll have to look at the logs.  Accessing the logs
depends on your <code>Node</code> OS.  On some OSes it is a file, such as
/var/log/kube-proxy.log, while other OSes use <code>journalctl</code> to access logs.  You
should see something like:</p>

<div class="highlight">
  <pre><code class="language-console">I0707 17:34:53.945651   30031 server.go:88] Running in resource-only container "/kube-proxy"
I0707 17:34:53.945921   30031 proxier.go:121] Setting proxy IP to 10.240.115.247 and initializing iptables
I0707 17:34:54.053023   30031 roundrobin.go:262] LoadBalancerRR: Setting endpoints for default/kubernetes: to [10.240.169.188:443]
I0707 17:34:54.053175   30031 roundrobin.go:262] LoadBalancerRR: Setting endpoints for default/hostnames:default to [10.244.0.5:9376 10.244.0.6:9376 10.244.0.7:9376]
I0707 17:34:54.053284   30031 roundrobin.go:262] LoadBalancerRR: Setting endpoints for default/kube-dns:dns to [10.244.3.3:53]
I0707 17:34:54.053310   30031 roundrobin.go:262] LoadBalancerRR: Setting endpoints for default/kube-dns:dns-tcp to [10.244.3.3:53]
I0707 17:34:54.054780   30031 proxier.go:306] Adding new service "default/kubernetes:" at 10.0.0.1:443/TCP
I0707 17:34:54.054903   30031 proxier.go:247] Proxying for service "default/kubernetes:" on TCP port 40074
I0707 17:34:54.079181   30031 proxier.go:306] Adding new service "default/hostnames:default" at 10.0.1.175:80/TCP
I0707 17:34:54.079273   30031 proxier.go:247] Proxying for service "default/hostnames:default" on TCP port 48577
I0707 17:34:54.113665   30031 proxier.go:306] Adding new service "default/kube-dns:dns" at 10.0.0.10:53/UDP
I0707 17:34:54.113776   30031 proxier.go:247] Proxying for service "default/kube-dns:dns" on UDP port 34149
I0707 17:34:54.120224   30031 proxier.go:306] Adding new service "default/kube-dns:dns-tcp" at 10.0.0.10:53/TCP
I0707 17:34:54.120297   30031 proxier.go:247] Proxying for service "default/kube-dns:dns-tcp" on TCP port 53476
I0707 17:34:54.902313   30031 proxysocket.go:130] Accepted TCP connection from 10.244.3.3:42670 to 10.244.3.1:40074
I0707 17:34:54.903107   30031 proxysocket.go:130] Accepted TCP connection from 10.244.3.3:42671 to 10.244.3.1:40074
I0707 17:35:46.015868   30031 proxysocket.go:246] New UDP connection from 10.244.3.2:57493
I0707 17:35:46.017061   30031 proxysocket.go:246] New UDP connection from 10.244.3.2:55471
</code></pre>
</div>

<p>If you see error messages about not being able to contact the master, you
should double-check your <code>Node</code> configuration and installation steps.</p>

<h3 id="is-kube-proxy-writing-iptables-rules">Is kube-proxy writing iptables rules?</h3>

<p>One of the main responsibilities of <code>kube-proxy</code> is to write the <code>iptables</code>
rules which implement <code>Service</code>s.  Let’s check that those rules are getting
written.</p>

<div class="highlight">
  <pre><code class="language-console">u@node$ iptables-save | grep hostnames
-A KUBE-PORTALS-CONTAINER -d 10.0.1.175/32 -p tcp -m comment --comment "default/hostnames:default" -m tcp --dport 80 -j REDIRECT --to-ports 48577
-A KUBE-PORTALS-HOST -d 10.0.1.175/32 -p tcp -m comment --comment "default/hostnames:default" -m tcp --dport 80 -j DNAT --to-destination 10.240.115.247:48577
</code></pre>
</div>

<p>There should be 2 rules for each port on your <code>Service</code> (just one in this
example) - a “KUBE-PORTALS-CONTAINER” and a “KUBE-PORTALS-HOST”.  If you do
not see these, try restarting <code>kube-proxy</code> with the <code>-V</code> flag set to 4, and
then look at the logs again.</p>

<h3 id="is-kube-proxy-proxying">Is kube-proxy proxying?</h3>

<p>Assuming you do see the above rules, try again to access your <code>Service</code> by IP:</p>

<div class="highlight">
  <pre><code class="language-console">u@node$ curl 10.0.1.175:80
hostnames-0uton
</code></pre>
</div>

<p>If this fails, we can try accessing the proxy directly.  Look back at the
<code>iptables-save</code> output above, and extract the port number that <code>kube-proxy</code> is
using for your <code>Service</code>.  In the above examples it is “48577”.  Now connect to
that:</p>

<div class="highlight">
  <pre><code class="language-console">u@node$ curl localhost:48577
hostnames-yp2kp
</code></pre>
</div>

<p>If this still fails, look at the <code>kube-proxy</code> logs for specific lines like:</p>

<div class="highlight">
  <pre><code class="language-console">Setting endpoints for default/hostnames:default to [10.244.0.5:9376 10.244.0.6:9376 10.244.0.7:9376]
</code></pre>
</div>

<p>If you don’t see those, try restarting <code>kube-proxy</code> with the <code>-V</code> flag set to 4, and
then look at the logs again.</p>

<h2 id="seek-help">Seek help</h2>

<p>If you get this far, something very strange is happening.  Your <code>Service</code> is
running, has <code>Endpoints</code>, and your <code>Pod</code>s are actually serving.  You have DNS
working, <code>iptables</code> rules installed, and <code>kube-proxy</code> does not seem to be
misbehaving.  And yet your <code>Service</code> is not working.  You should probably let
us know, so we can help investigate!</p>

<p>Contact us on
<a href="../troubleshooting.html#slack">Slack</a> or
<a href="https://groups.google.com/forum/#!forum/google-containers">email</a> or
<a href="https://github.com/kubernetes/kubernetes">GitHub</a>.</p>

<h2 id="more-information">More information</h2>

<p>Visit <a href="../troubleshooting.html">troubleshooting document</a> for more information.</p>

<!-- BEGIN MUNGE: IS_VERSIONED -->
<!-- TAG IS_VERSIONED -->
<!-- END MUNGE: IS_VERSIONED -->

<!-- BEGIN MUNGE: GENERATED_ANALYTICS -->
<p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/user-guide/debugging-services.md?pixel" alt="Analytics" /></a>
<!-- END MUNGE: GENERATED_ANALYTICS --></p>


	</div>
</section>


<footer>
	<main class="light-text">
		<nav>
			<a href="/getting-started.html">Getting Started</a>
			<a href="/docs.html">Documentation</a>
			<a href="http://blog.kubernetes.io/">Blog</a>
			<a href="/foobang.html">Community</a>
		</nav>
		<div class="social">
			<a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
			<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
			<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
			<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>stackoverflow</span></a>
			<a href="https://groups.google.com/forum/#!forum/google-containers" class="mailing-list"><span>Mailing List</span></a>
			<label for="wishField">I wish this page <input type="text" id="wishField" name="wishField" placeholder="made better textfield suggestions"></label>
		</div>
		<div class="center">&copy; 2016 Kubernetes</div>
	</main>
</footer>

</body>
</html>



