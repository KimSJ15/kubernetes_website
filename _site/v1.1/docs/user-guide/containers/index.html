<!Doctype html>
<html id="docs">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="/css/styles.css"/>
	<script src="/js/script.js"></script>
    <script src="/js/jquery-2.2.0.min.js"></script>
    <script src="/js/non-mini.js"></script>
    <title>Kubernetes - Containers with Kubernetes</title>
</head>
<body>
<div id="cellophane" onclick="kub.toggleMenu()"></div>
<header>
	<a href="/" class="logo"></a>
	<div class="nav-buttons" data-auto-burger="primary">
		<a href="/docs" class="button" id="viewDocs">View Documentation</a>
		<a href="/get-started" class="button" id="tryKubernetes">Try Kubernetes</a>
		<button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
	</div>

	<nav id="mainNav">
		<main data-auto-burger="primary">
			<div class="nav-box">
				<h3><a href="">Get Started</a></h3>
				<p>Built for a multi-cloud world, public, private or hybrid. Seamlessly roll out new features.</p>
			</div>
			<div class="nav-box">
				<h3><a href="">Documentation</a></h3>
				<p>Pellentesque in ipsum id orci porta dapibus. Nulla porttitor accumsan tincidunt. </p>
			</div>
			<div class="nav-box">
				<h3><a href="">Community</a></h3>
				<p>Vestibulum ac diam sit amet quam vehicula elementum sed sit amet dui. </p>
			</div>
			<div class="nav-box">
				<h3><a href="">Blog</a></h3>
				<p>Curabitur arcu erat, accumsan id imperdiet et, porttitor at sem. Quisque velit nisi, pretium ut lacinia in. </p>
			</div>
		</main>
		<main data-auto-burger="primary">
			<div class="left">
				<h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
				<a href="" class="button">View On Github</a>
			</div>

			<div class="right">
				<h5 class="github-invite">Explore the community</h5>
				<div class="social">
					<a href="https://twitter.com/kubernetesio" class="Twitter"><span>twitter</span></a>
					<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
					<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
					<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>stackoverflow</span></a>
					<a href="https://groups.google.com/forum/#!forum/google-containers" class="mailing-list"><span>Mailing List</span></a>
				</div>
			</div>
			<div class="clear" style="clear: both"></div>
		</main>
	</nav>
</header>

<!--  HERO  -->
<section id="hero" class="light-text">
	<h1></h1>
	<h5></h5>
	<div id="vendorStrip" class="light-text">
		<ul>
			<li><a href="/v1.1/">GUIDES</a></li>
			<li><a href="/v1.1/reference">REFERENCE</a></li>
			<li><a href="/v1.1/samples">SAMPLES</a></li>
			<li><a href="/v1.1/support">SUPPORT</a></li>
		</ul>
		<div class="dropdown">
			<div class="readout"></div>
			<a href="/v1.1">Version 1.1</a>
			<a href="/v1.0">Version 1.0</a>
		</div>
		<input type="text" id="search" placeholder="Search the docs">
	</div>
</section>

<section id="encyclopedia">
	<div id="docsToc">
        <div class="pi-accordion">
            
            

        </div> <!-- /pi-accordion -->
	</div> <!-- /docsToc -->
	<div id="docsContent">
    	<h1>Containers with Kubernetes</h1>
		<!-- BEGIN MUNGE: UNVERSIONED_WARNING -->

<!-- END MUNGE: UNVERSIONED_WARNING -->

<h1 id="containers-with-kubernetes">Containers with Kubernetes</h1>

<h2 id="containers-and-commands">Containers and commands</h2>

<p>So far the Pods we’ve seen have all used the <code>image</code> field to indicate what process Kubernetes
should run in a container.  In this case, Kubernetes runs the image’s default command.  If we want
to run a particular command or override the image’s defaults, there are two additional fields that
we can use:</p>

<ol>
  <li><code>Command</code>: Controls the actual command run by the image</li>
  <li><code>Args</code>: Controls the arguments passed to the command</li>
</ol>

<h3 id="how-docker-handles-command-and-arguments">How docker handles command and arguments</h3>

<p>Docker images have metadata associated with them that is used to store information about the image.
The image author may use this to define defaults for the command and arguments to run a container
when the user does not supply values.  Docker calls the fields for commands and arguments
<code>Entrypoint</code> and <code>Cmd</code> respectively.  The full details for this feature are too complicated to
describe here, mostly due to the fact that the docker API allows users to specify both of these
fields as either a string array or a string and there are subtle differences in how those cases are
handled.  We encourage the curious to check out <a href="">docker’s documentation</a> for this feature.</p>

<p>Kubernetes allows you to override both the image’s default command (docker <code>Entrypoint</code>) and args
(docker <code>Cmd</code>) with the <code>Command</code> and <code>Args</code> fields of <code>Container</code>.  The rules are:</p>

<ol>
  <li>If you do not supply a <code>Command</code> or <code>Args</code> for a container, the defaults defined by the image
will be used</li>
  <li>If you supply a <code>Command</code> but no <code>Args</code> for a container, only the supplied <code>Command</code> will be
used; the image’s default arguments are ignored</li>
  <li>If you supply only <code>Args</code>, the image’s default command will be used with the arguments you
supply</li>
  <li>If you supply a <code>Command</code> <strong>and</strong> <code>Args</code>, the image’s defaults will be ignored and the values
you supply will be used</li>
</ol>

<p>Here are examples for these rules in table format</p>

<table>
  <thead>
    <tr>
      <th>Image <code>Entrypoint</code></th>
      <th>Image <code>Cmd</code></th>
      <th>Container <code>Command</code></th>
      <th>Container <code>Args</code></th>
      <th>Command Run</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>[/ep-1]</code></td>
      <td><code>[foo bar]</code></td>
      <td>&lt;not set&gt;</td>
      <td>&lt;not set&gt;</td>
      <td><code>[ep-1 foo bar]</code></td>
    </tr>
    <tr>
      <td><code>[/ep-1]</code></td>
      <td><code>[foo bar]</code></td>
      <td><code>[/ep-2]</code></td>
      <td>&lt;not set&gt;</td>
      <td><code>[ep-2]</code></td>
    </tr>
    <tr>
      <td><code>[/ep-1]</code></td>
      <td><code>[foo bar]</code></td>
      <td>&lt;not set&gt;</td>
      <td><code>[zoo boo]</code></td>
      <td><code>[ep-1 zoo boo]</code></td>
    </tr>
    <tr>
      <td><code>[/ep-1]</code></td>
      <td><code>[foo bar]</code></td>
      <td><code>[/ep-2]</code></td>
      <td><code>[zoo boo]</code></td>
      <td><code>[ep-2 zoo boo]</code></td>
    </tr>
  </tbody>
</table>

<h2 id="capabilities">Capabilities</h2>

<p>By default, Docker containers are “unprivileged” and cannot, for example, run a Docker daemon inside a Docker container. We can have fine grain control over the capabilities using cap-add and cap-drop.More details <a href="https://docs.docker.com/reference/run/#runtime-privilege-linux-capabilities-and-lxc-configuration">here</a>.</p>

<p>The relationship between Docker’s capabilities and <a href="http://man7.org/linux/man-pages/man7/capabilities.7.html">Linux capabilities</a></p>

<table>
  <thead>
    <tr>
      <th>Docker’s capabilities</th>
      <th>Linux capabilities</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>SETPCAP</td>
      <td>CAP_SETPCAP</td>
    </tr>
    <tr>
      <td>SYS_MODULE</td>
      <td>CAP_SYS_MODULE</td>
    </tr>
    <tr>
      <td>SYS_RAWIO</td>
      <td>CAP_SYS_RAWIO</td>
    </tr>
    <tr>
      <td>SYS_PACCT</td>
      <td>CAP_SYS_PACCT</td>
    </tr>
    <tr>
      <td>SYS_ADMIN</td>
      <td>CAP_SYS_ADMIN</td>
    </tr>
    <tr>
      <td>SYS_NICE</td>
      <td>CAP_SYS_NICE</td>
    </tr>
    <tr>
      <td>SYS_RESOURCE</td>
      <td>CAP_SYS_RESOURCE</td>
    </tr>
    <tr>
      <td>SYS_TIME</td>
      <td>CAP_SYS_TIME</td>
    </tr>
    <tr>
      <td>SYS_TTY_CONFIG</td>
      <td>CAP_SYS_TTY_CONFIG</td>
    </tr>
    <tr>
      <td>MKNOD</td>
      <td>CAP_MKNOD</td>
    </tr>
    <tr>
      <td>AUDIT_WRITE</td>
      <td>CAP_AUDIT_WRITE</td>
    </tr>
    <tr>
      <td>AUDIT_CONTROL</td>
      <td>CAP_AUDIT_CONTROL</td>
    </tr>
    <tr>
      <td>MAC_OVERRIDE</td>
      <td>CAP_MAC_OVERRIDE</td>
    </tr>
    <tr>
      <td>MAC_ADMIN</td>
      <td>CAP_MAC_ADMIN</td>
    </tr>
    <tr>
      <td>NET_ADMIN</td>
      <td>CAP_NET_ADMIN</td>
    </tr>
    <tr>
      <td>SYSLOG</td>
      <td>CAP_SYSLOG</td>
    </tr>
    <tr>
      <td>CHOWN</td>
      <td>CAP_CHOWN</td>
    </tr>
    <tr>
      <td>NET_RAW</td>
      <td>CAP_NET_RAW</td>
    </tr>
    <tr>
      <td>DAC_OVERRIDE</td>
      <td>CAP_DAC_OVERRIDE</td>
    </tr>
    <tr>
      <td>FOWNER</td>
      <td>CAP_FOWNER</td>
    </tr>
    <tr>
      <td>DAC_READ_SEARCH</td>
      <td>CAP_DAC_READ_SEARCH</td>
    </tr>
    <tr>
      <td>FSETID</td>
      <td>CAP_FSETID</td>
    </tr>
    <tr>
      <td>KILL</td>
      <td>CAP_KILL</td>
    </tr>
    <tr>
      <td>SETGID</td>
      <td>CAP_SETGID</td>
    </tr>
    <tr>
      <td>SETUID</td>
      <td>CAP_SETUID</td>
    </tr>
    <tr>
      <td>LINUX_IMMUTABLE</td>
      <td>CAP_LINUX_IMMUTABLE</td>
    </tr>
    <tr>
      <td>NET_BIND_SERVICE</td>
      <td>CAP_NET_BIND_SERVICE</td>
    </tr>
    <tr>
      <td>NET_BROADCAST</td>
      <td>CAP_NET_BROADCAST</td>
    </tr>
    <tr>
      <td>IPC_LOCK</td>
      <td>CAP_IPC_LOCK</td>
    </tr>
    <tr>
      <td>IPC_OWNER</td>
      <td>CAP_IPC_OWNER</td>
    </tr>
    <tr>
      <td>SYS_CHROOT</td>
      <td>CAP_SYS_CHROOT</td>
    </tr>
    <tr>
      <td>SYS_PTRACE</td>
      <td>CAP_SYS_PTRACE</td>
    </tr>
    <tr>
      <td>SYS_BOOT</td>
      <td>CAP_SYS_BOOT</td>
    </tr>
    <tr>
      <td>LEASE</td>
      <td>CAP_LEASE</td>
    </tr>
    <tr>
      <td>SETFCAP</td>
      <td>CAP_SETFCAP</td>
    </tr>
    <tr>
      <td>WAKE_ALARM</td>
      <td>CAP_WAKE_ALARM</td>
    </tr>
    <tr>
      <td>BLOCK_SUSPEND</td>
      <td>CAP_BLOCK_SUSPEND</td>
    </tr>
  </tbody>
</table>

<!-- BEGIN MUNGE: IS_VERSIONED -->
<!-- TAG IS_VERSIONED -->
<!-- END MUNGE: IS_VERSIONED -->

<!-- BEGIN MUNGE: GENERATED_ANALYTICS -->
<p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/user-guide/containers.md?pixel" alt="Analytics" /></a>
<!-- END MUNGE: GENERATED_ANALYTICS --></p>


	</div>
</section>


<footer>
	<main class="light-text">
		<nav>
			<a href="/getting-started.html">Getting Started</a>
			<a href="/docs.html">Documentation</a>
			<a href="http://blog.kubernetes.io/">Blog</a>
			<a href="/foobang.html">Community</a>
		</nav>
		<div class="social">
			<a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
			<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
			<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
			<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>stackoverflow</span></a>
			<a href="https://groups.google.com/forum/#!forum/google-containers" class="mailing-list"><span>Mailing List</span></a>
			<label for="wishField">I wish this page <input type="text" id="wishField" name="wishField" placeholder="made better textfield suggestions"></label>
		</div>
		<div class="center">&copy; 2016 Kubernetes</div>
	</main>
</footer>

</body>
</html>



