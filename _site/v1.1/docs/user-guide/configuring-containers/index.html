<!Doctype html>
<html id="docs">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="/css/styles.css"/>
	<script src="/js/script.js"></script>
    <script src="/js/jquery-2.2.0.min.js"></script>
    <script src="/js/non-mini.js"></script>
    <title>Kubernetes - Kubernetes User Guide: Managing Applications: Configuring and launching containers</title>
</head>
<body>
<div id="cellophane" onclick="kub.toggleMenu()"></div>
<header>
	<a href="/" class="logo"></a>
	<div class="nav-buttons" data-auto-burger="primary">
		<a href="/docs" class="button" id="viewDocs">View Documentation</a>
		<a href="/get-started" class="button" id="tryKubernetes">Try Kubernetes</a>
		<button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
	</div>

	<nav id="mainNav">
		<main data-auto-burger="primary">
			<div class="nav-box">
				<h3><a href="">Get Started</a></h3>
				<p>Built for a multi-cloud world, public, private or hybrid. Seamlessly roll out new features.</p>
			</div>
			<div class="nav-box">
				<h3><a href="">Documentation</a></h3>
				<p>Pellentesque in ipsum id orci porta dapibus. Nulla porttitor accumsan tincidunt. </p>
			</div>
			<div class="nav-box">
				<h3><a href="">Community</a></h3>
				<p>Vestibulum ac diam sit amet quam vehicula elementum sed sit amet dui. </p>
			</div>
			<div class="nav-box">
				<h3><a href="">Blog</a></h3>
				<p>Curabitur arcu erat, accumsan id imperdiet et, porttitor at sem. Quisque velit nisi, pretium ut lacinia in. </p>
			</div>
		</main>
		<main data-auto-burger="primary">
			<div class="left">
				<h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
				<a href="" class="button">View On Github</a>
			</div>

			<div class="right">
				<h5 class="github-invite">Explore the community</h5>
				<div class="social">
					<a href="https://twitter.com/kubernetesio" class="Twitter"><span>twitter</span></a>
					<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
					<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
					<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>stackoverflow</span></a>
					<a href="https://groups.google.com/forum/#!forum/google-containers" class="mailing-list"><span>Mailing List</span></a>
				</div>
			</div>
			<div class="clear" style="clear: both"></div>
		</main>
	</nav>
</header>

<!--  HERO  -->
<section id="hero" class="light-text">
	<h1></h1>
	<h5></h5>
	<div id="vendorStrip" class="light-text">
		<ul>
			<li><a href="/v1.1/guides">GUIDES</a></li>
			<li><a href="/v1.1/reference">REFERENCE</a></li>
			<li><a href="/v1.1/samples">SAMPLES</a></li>
			<li><a href="/v1.1/support">SUPPORT</a></li>
		</ul>
		<div class="dropdown">
			<div class="readout"></div>
			<a href="/v1.1">Version 1.1</a>
			<a href="/v1.0">Version 1.0</a>
		</div>
		<input type="text" id="search" placeholder="Search the docs">
	</div>
</section>

<section id="encyclopedia">
	<div id="docsToc">
        <div class="pi-accordion">
            
            

        </div> <!-- /pi-accordion -->
	</div> <!-- /docsToc -->
	<div id="docsContent">
    	<h1>Kubernetes User Guide: Managing Applications: Configuring and launching containers</h1>
		<!-- BEGIN MUNGE: UNVERSIONED_WARNING -->

<!-- END MUNGE: UNVERSIONED_WARNING -->

<h1 id="kubernetes-user-guide-managing-applications-configuring-and-launching-containers">Kubernetes User Guide: Managing Applications: Configuring and launching containers</h1>

<p><strong>Table of Contents</strong>
<!-- BEGIN MUNGE: GENERATED_TOC --></p>

<ul>
  <li><a href="#kubernetes-user-guide-managing-applications-configuring-and-launching-containers">Kubernetes User Guide: Managing Applications: Configuring and launching containers</a>
    <ul>
      <li><a href="#configuration-in-kubernetes">Configuration in Kubernetes</a></li>
      <li><a href="#launching-a-container-using-a-configuration-file">Launching a container using a configuration file</a></li>
      <li><a href="#validating-configuration">Validating configuration</a></li>
      <li><a href="#environment-variables-and-variable-expansion">Environment variables and variable expansion</a></li>
      <li><a href="#viewing-pod-status">Viewing pod status</a></li>
      <li><a href="#viewing-pod-output">Viewing pod output</a></li>
      <li><a href="#deleting-pods">Deleting pods</a></li>
      <li><a href="#whats-next">What’s next?</a></li>
    </ul>
  </li>
</ul>

<!-- END MUNGE: GENERATED_TOC -->

<h2 id="configuration-in-kubernetes">Configuration in Kubernetes</h2>

<p>In addition to the imperative-style commands, such as <code>kubectl run</code> and <code>kubectl expose</code>, described <a href="quick-start.html">elsewhere</a>, Kubernetes supports declarative configuration. Often times, configuration files are preferable to imperative commands, since they can be checked into version control and changes to the files can be code reviewed, which is especially important for more complex configurations, producing a more robust, reliable and archival system.</p>

<p>In the declarative style, all configuration is stored in YAML or JSON configuration files using Kubernetes’s API resource schemas as the configuration schemas. <code>kubectl</code> can create, update, delete, and get API resources. The <code>apiVersion</code> (currently “v1”), resource <code>kind</code>, and resource <code>name</code> are used by <code>kubectl</code> to construct the appropriate API path to invoke for the specified operation.</p>

<h2 id="launching-a-container-using-a-configuration-file">Launching a container using a configuration file</h2>

<p>Kubernetes executes containers in <a href="pods.html"><em>Pods</em></a>. A pod containing a simple Hello World container can be specified in YAML as follows:</p>

<div class="highlight">
  <pre><code class="language-yaml">apiVersion: v1
kind: Pod
metadata:
  name: hello-world
spec:  # specification of the pod’s contents
  restartPolicy: Never
  containers:
  - name: hello
    image: "ubuntu:14.04"
    command: ["/bin/echo","hello”,”world"]
</code></pre>
</div>

<p>The value of <code>metadata.name</code>, <code>hello-world</code>, will be the name of the pod resource created, and must be unique within the cluster, whereas <code>containers[0].name</code> is just a nickname for the container within that pod. <code>image</code> is the name of the Docker image, which Kubernetes expects to be able to pull from a registry, the <a href="https://registry.hub.docker.com/">Docker Hub</a> by default.</p>

<p><code>restartPolicy: Never</code> indicates that we just want to run the container once and then terminate the pod.</p>

<p>The <a href="containers.html#containers-and-commands"><code>command</code></a> overrides the Docker container’s <code>Entrypoint</code>. Command arguments (corresponding to Docker’s <code>Cmd</code>) may be specified using <code>args</code>, as follows:</p>

<div class="highlight">
  <pre><code class="language-yaml">command: ["/bin/echo"]
    args: ["hello","world"]
</code></pre>
</div>

<p>This pod can be created using the <code>create</code> command:</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl create -f ./hello-world.yaml
pods/hello-world
</code></pre>
</div>

<p><code>kubectl</code> prints the resource type and name of the resource created when successful.</p>

<h2 id="validating-configuration">Validating configuration</h2>

<p>If you’re not sure you specified the resource correctly, you can ask <code>kubectl</code> to validate it for you:</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl create -f ./hello-world.yaml --validate
</code></pre>
</div>

<p>Let’s say you specified <code>entrypoint</code> instead of <code>command</code>. You’d see output as follows:</p>

<div class="highlight">
  <pre><code class="language-console">I0709 06:33:05.600829   14160 schema.go:126] unknown field: entrypoint
I0709 06:33:05.600988   14160 schema.go:129] this may be a false alarm, see http://issue.k8s.io/6842
pods/hello-world
</code></pre>
</div>

<p><code>kubectl create --validate</code> currently warns about problems it detects, but creates the resource anyway, unless a required field is absent or a field value is invalid. Unknown API fields are ignored, so be careful. This pod was created, but with no <code>command</code>, which is an optional field, since the image may specify an <code>Entrypoint</code>.
View the <a href="http://kubernetes.io/v1.1/docs/api-reference/v1/definitions.html#_v1_pod">Pod API
object</a>
to see the list of valid fields.</p>

<h2 id="environment-variables-and-variable-expansion">Environment variables and variable expansion</h2>

<p>Kubernetes <a href="https://github.com/kubernetes/kubernetes/wiki/User-FAQ#use-of-environment-variables-on-the-command-line">does not automatically run commands in a shell</a> (not all images contain shells). If you would like to run your command in a shell, such as to expand environment variables (specified using <code>env</code>), you could do the following:</p>

<div class="highlight">
  <pre><code class="language-yaml">apiVersion: v1
kind: Pod
metadata:
  name: hello-world
spec:  # specification of the pod’s contents
  restartPolicy: Never
  containers:
  - name: hello
    image: "ubuntu:14.04"
    env:
    - name: MESSAGE
      value: "hello world"
    command: ["/bin/sh","-c"]
    args: ["/bin/echo \"${MESSAGE}\""]
</code></pre>
</div>

<p>However, a shell isn’t necessary just to expand environment variables. Kubernetes will do it for you if you use <a href="../../docs/design/expansion.html"><code>$(ENVVAR)</code> syntax</a>:</p>

<div class="highlight">
  <pre><code class="language-yaml">command: ["/bin/echo"]
    args: ["$(MESSAGE)"]
</code></pre>
</div>

<h2 id="viewing-pod-status">Viewing pod status</h2>

<p>You can see the pod you created (actually all of your cluster’s pods) using the <code>get</code> command.</p>

<p>If you’re quick, it will look as follows:</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl get pods
NAME          READY     STATUS    RESTARTS   AGE
hello-world   0/1       Pending   0          0s
</code></pre>
</div>

<p>Initially, a newly created pod is unscheduled – no node has been selected to run it. Scheduling happens after creation, but is fast, so you normally shouldn’t see pods in an unscheduled state unless there’s a problem.</p>

<p>After the pod has been scheduled, the image may need to be pulled to the node on which it was scheduled, if it hadn’t been pulled already. After a few seconds, you should see the container running:</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl get pods
NAME          READY     STATUS    RESTARTS   AGE
hello-world   1/1       Running   0          5s
</code></pre>
</div>

<p>The <code>READY</code> column shows how many containers in the pod are running.</p>

<p>Almost immediately after it starts running, this command will terminate. <code>kubectl</code> shows that the container is no longer running and displays the exit status:</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl get pods
NAME          READY     STATUS       RESTARTS   AGE
hello-world   0/1       ExitCode:0   0          15s
</code></pre>
</div>

<h2 id="viewing-pod-output">Viewing pod output</h2>

<p>You probably want to see the output of the command you ran. As with <a href="https://docs.docker.com/userguide/usingdocker/"><code>docker logs</code></a>, <code>kubectl logs</code> will show you the output:</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl logs hello-world
hello world
</code></pre>
</div>

<h2 id="deleting-pods">Deleting pods</h2>

<p>When you’re done looking at the output, you should delete the pod:</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl delete pod hello-world
pods/hello-world
</code></pre>
</div>

<p>As with <code>create</code>, <code>kubectl</code> prints the resource type and name of the resource deleted when successful.</p>

<p>You can also use the resource/name format to specify the pod:</p>

<div class="highlight">
  <pre><code class="language-console">$ kubectl delete pods/hello-world
pods/hello-world
</code></pre>
</div>

<p>Terminated pods aren’t currently automatically deleted, so that you can observe their final status, so be sure to clean up your dead pods.</p>

<p>On the other hand, containers and their logs are eventually deleted automatically in order to free up disk space on the nodes.</p>

<h2 id="whats-next">What’s next?</h2>

<p><a href="deploying-applications.html">Learn about deploying continuously running applications.</a></p>

<!-- BEGIN MUNGE: IS_VERSIONED -->
<!-- TAG IS_VERSIONED -->
<!-- END MUNGE: IS_VERSIONED -->

<!-- BEGIN MUNGE: GENERATED_ANALYTICS -->
<p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/user-guide/configuring-containers.md?pixel" alt="Analytics" /></a>
<!-- END MUNGE: GENERATED_ANALYTICS --></p>


	</div>
</section>


<footer>
	<main class="light-text">
		<nav>
			<a href="/getting-started.html">Getting Started</a>
			<a href="/docs.html">Documentation</a>
			<a href="http://blog.kubernetes.io/">Blog</a>
			<a href="/foobang.html">Community</a>
		</nav>
		<div class="social">
			<a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
			<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
			<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
			<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>stackoverflow</span></a>
			<a href="https://groups.google.com/forum/#!forum/google-containers" class="mailing-list"><span>Mailing List</span></a>
			<label for="wishField">I wish this page <input type="text" id="wishField" name="wishField" placeholder="made better textfield suggestions"></label>
		</div>
		<div class="center">&copy; 2016 Kubernetes</div>
	</main>
</footer>

</body>
</html>



